/*!
 * bload.js v0.3.3
 */
(function(e){var t={showing:false,init:function(e,t,n){this.$tomask=e;this.options=t;this.callback=n;this.show()},show:function(){var t=this;if(t.showing==true)return;var n=t.$tomask.offset();if(t.options.fullScreen==false){switch(t.options.imageAlign){case"top":var r=n.left+(t.$tomask.width()-(t.options.imageDims.w+t.options.imagePadding*2))/2;var i=n.top+8;break;case"bottom":var r=n.left+(t.$tomask.width()-(t.options.imageDims.w+t.options.imagePadding*2))/2;var i=n.top+(t.$tomask.height()-(t.options.imageDims.h+t.options.imagePadding*2)-8);break;case"left":var r=n.left+8;var i=n.top+(t.$tomask.height()-(t.options.imageDims.h+t.options.imagePadding*2))/2;break;case"right":var r=n.left+(t.$tomask.width()-(t.options.imageDims.w+t.options.imagePadding*2)-8);var i=n.top+(t.$tomask.height()-(t.options.imageDims.h+t.options.imagePadding*2))/2;break;default:var r=n.left+(t.$tomask.width()-(t.options.imageDims.w+t.options.imagePadding*2))/2;var i=n.top+(t.$tomask.height()-(t.options.imageDims.h+t.options.imagePadding*2))/2;break}var s="absolute"}else{var r=(e(window).width()-(t.options.imageDims.w+t.options.imagePadding*2))/2;var i=(e(window).height()-(t.options.imageDims.h+t.options.imagePadding*2))/2;var s="fixed"}var o={padding:t.options.imagePadding+"px",backgroundColor:"#000",position:s,borderRadius:"4px 4px 4px 4px",top:i,left:r,zIndex:1e4};t.$mask=e("<div />").css(o);var u=t.$tomask.is(":visible")==false&&t.options.fullScreen==false?false:true;if(u){if(t.options.imagePath===false){t.$mask.append(e("<div />").addClass("bloading"))}else{t.$mask.append(e("<div />").css({backgroundImage:"url("+t.options.imagePath+")",width:t.options.imageDims.w+"px",height:t.options.imageDims.h+"px"}))}}callback=t.callback;t.showing=true;if(t.options.overlay.show===true){var a={position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:t.options.overlay.color,zIndex:9999};if(t.options.fullScreen==false){a.position="absolute";a.top=n.top+"px";a.left=n.left+"px";a.width=t.$tomask.width()+"px";a.height=t.$tomask.height()+"px"}if(u){t.$overlay=e("<div />").css(a);e("body").append(t.$overlay.fadeTo(t.options.fadeInSpeed,t.options.overlay.opacity))}}e("body").append(t.$mask.fadeTo(t.options.fadeInSpeed,t.options.maskOpacity,function(){if(e.isFunction(callback)){callback.call(this,t)}}))},hide:function(){this.showing=false;this.$mask.remove();if(this.options.overlay.show==true)this.$overlay.remove()}};e.fn.bload=function(n,r){var i={fadeInSpeed:300,maskOpacity:.4,imagePath:false,imagePadding:16,imageDims:{w:32,h:32},imageAlign:"center",fullScreen:false,overlay:{show:false,color:"#000",opacity:.2}};if(e.isFunction(n)){r=n;n=i}else{var n=e.extend(true,i,n)}if(e(this).data("bloadInit")===true){var s=e(this).data("bload")}else{e(this).data("bloadInit",true);var s=Object.create(t);e(this).data("bload",s)}s.init(e(this),n,r);return s}})(jQuery)
